<!DOCTYPE html>
<html style="height: 100%">
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body style="height:100%">
    <canvas id="canvas" style="height:100%">
        当前浏览器不支持Canvas，请更换浏览器后再试
    </canvas>
  for (var i = 0; i < balls.length; i++)
    if (balls[i].x + RADIUS > 0 && balls[i].x - RADIUS < WINDOW_WIDTH)
      balls[cnt++] = balls[i]

  while (balls.length > Math.min(300,cnt)) {
    balls.pop();
  }
  
    //console.log(balls.length);
}

function render(cxt){
  cxt.clearRect(0,0,WINDOW_WIDTH, WINDOW_HEIGHT);  //对矩形图像进行一次刷新操作
  
  var hours = parseInt( curShowTimeSeconds / 3600), 
     minutes = parseInt((curShowTimeSeconds - hours*3600)/60), 
     seconds = curShowTimeSeconds % 60;  
  renderDigit(MARGIN_LEFT,MARGIN_TOP,parseInt(hours/10),cxt);
  renderDigit(MARGIN_LEFT+15*(RADIUS+1),MARGIN_TOP,parseInt(hours%10),cxt);
  renderDigit(MARGIN_LEFT+30*(RADIUS+1),MARGIN_TOP,10,cxt);
  renderDigit(MARGIN_LEFT+39*(RADIUS+1),MARGIN_TOP,parseInt(minutes/10),cxt);
  renderDigit(MARGIN_LEFT+54*(RADIUS+1),MARGIN_TOP,parseInt(minutes%10),cxt);
  renderDigit(MARGIN_LEFT+69*(RADIUS+1),MARGIN_TOP,10,cxt);
  renderDigit(MARGIN_LEFT+78*(RADIUS+1),MARGIN_TOP,parseInt(seconds/10),cxt);
  renderDigit(MARGIN_LEFT+93*(RADIUS+1),MARGIN_TOP,seconds%10,cxt);
}

function renderDigit(x, y, num, cxt) {
  cxt.fillStyle = "rgba(0,102,153,1)";
  for (var i = 0; i < digit[num].length; i++) {
    for (var j = 0; j < digit[num][i].length; j++) {
      if (digit[num][i][j] === 1) {
        cxt.beginPath();
        cxt.arc(x + j * 2 * (RADIUS + 1) + (RADIUS + 1), y + i * 2 * (RADIUS + 1) + (RADIUS + 1), RADIUS, 0, 2 * Math.PI);
        cxt.closePath();
        cxt.fill();
      }
    }
  }

  for (var i = 0; i < balls.length; i++) { //小球的绘制
    cxt.fillStyle = balls[i].color;
    cxt.beginPath();
    cxt.arc(balls[i].x, balls[i].y, RADIUS, 0, 2 * Math.PI, true);
    cxt.closePath();
    cxt.fill();
  }

}    
</script>
</body> 
</html>
